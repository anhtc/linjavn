@using LinJas.Areas.AdminLinja.Models
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/AdminLinja/Views/Shared/_Layouts.cshtml";
}


<div class="container-fluid">
    <div class="row well">
        <div class="col-md-8">
            <div class="panel panel-default">
                <div class="panel-heading">Nội dung sản phẩm:</div>
                <div class="panel-body">
                    <label>Tên sản phẩm:</label>
                    <textarea rows="1" id="txtName" class="form-control" placeholder="Tên sản phẩm..."></textarea>
                    <label>Nội dung:</label>
                    <textarea rows="10" id="txtContent" class="form-control" placeholder="Nội dung chi tiết..."></textarea>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Phần dành cho SEO:</div>
                <div class="panel-body">
                    <label>Tiêu đề:</label>
                    <textarea rows="2" id="txtTieuDeSeo" class="form-control" placeholder="Tiêu đề seo..."></textarea>
                    <label>Mô tả:</label>
                    <textarea rows="4" id="txtMotaSeo" class="form-control" placeholder="Mô tả seo..."></textarea>
                    <label>Từ khóa:</label>
                    <textarea rows="2" id="txtTukhoaSeo" class="form-control" placeholder="Từ khóa seo..."></textarea>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Nhập từ khóa tìm kiếm trên hệ thống:(vd: sản phẩm a, sản phẩm,...)</div>
                <div class="panel-body">
                    <label>Từ khóa tìm  kiếm:</label>
                    <textarea rows="2" id="txtTukhoaSeo" class="form-control" placeholder="Từ khóa tìm kiếm..."></textarea>
                </div>
            </div>      
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading">Thông tin sản phẩm</div>
                <div class="panel-body">
                    <label>Danh mục:</label>
                    @(Html.Kendo().ComboBox()
                  .Name("cbDanhMuc")
                  .Filter("contains")
                  .Placeholder("Chọn danh mục sản phẩm...")
                  .DataTextField("Ten")
                  .DataValueField("Id")
                  .DataSource(source =>
                  {
                      source.Read(read =>
                      {
                          read.Action("GetDataDanhMuc", "Common");
                      }).ServerFiltering(true);

                  })
                  .SelectedIndex(-1)
                  .Suggest(true)
                  .HtmlAttributes(new { style = "width:100%;" })
                    )
                    <label>Trạng thái:</label>
                    @(Html.Kendo().ComboBox()
                  .Name("cbTrangThai")
                  .Filter("contains")
                  .Placeholder("Chọn trạng thái...")
                  .DataTextField("Text")
                  .DataValueField("Value")
                  .BindTo(new List<SelectListItem>() {
                      new SelectListItem() {
                        Text = "Hàng mới về", Value = "1"
                      },
                      new SelectListItem() {
                        Text = "Bán chạy", Value = "2"
                      },
                      new SelectListItem() {
                        Text = "Hết hàng", Value = "3"
                      },
                      new SelectListItem() {
                        Text = "Đang về", Value = "4"
                      }
                  })
                  .SelectedIndex(-1)
                  .Suggest(true)
                  .HtmlAttributes(new { style = "width:100%;" })
                    )
                    <label>Giá cũ:</label>
                    <input type="number" id="txtGiaCu" placeholder="Giá cũ..." class="form-control"/>
                    <label>Giá mới:</label>
                    <input type="number" id="txtGiaMoi" placeholder="Giá mới..." class="form-control"/>
                    <label>Giảm giá:</label>
                    <input type="number" id="txtChietKhau" placeholder="Chiết khấu (vd: 10->'10%')..." class="form-control"/>
                    <label>Ngày bắt đầu:</label>
                    @(Html.Kendo().DateTimePicker()
                    .Name("dateNgaybatdau")
                    .Value(DateTime.Now)
                    .HtmlAttributes(new { style = "width: 100%", title = "Ngày bắt đầu" })                    
                    )
                   
                    <label>Ngày kết thúc:</label>                    
                    @(Html.Kendo().DateTimePicker()
                    .Name("dateNgayketthuc")
                    .Value(DateTime.Now)
                    .HtmlAttributes(new { style = "width: 100%", title = "Ngày kết thúc" })
                    )

                    <label>Sản phẩm khuyến mại:</label>
                    @(Html.Kendo().ComboBox()
                  .Name("cbKhuyenMaiId")
                  .Filter("contains")
                  .Placeholder("Chọn khuyến mại...")
                  .DataTextField("Text")
                  .DataValueField("Value")
                  .BindTo(new List<SelectListItem>() {
                      new SelectListItem() {
                        Text = "Khuyến mại hot", Value = "1"
                      },
                      new SelectListItem() {
                        Text = "Chưa có khuyến mại", Value = "2"
                      }
                  })
                  .SelectedIndex(-1)
                  .Suggest(true)
                  .HtmlAttributes(new { style = "width:100%;" })
                    )
                    <label>Sắp Xếp:</label>
                    <input type="number" id="txtSapxep" placeholder="Vị trí sản phẩm..." class="form-control" />
                    <br />                    
                    <label><span class="text-active">Kích hoạt: </span><input type="checkbox" id="txtActive" /></label>
                    <br />
                    <label>Ảnh đại diện:</label>
                    <div class="demo-section k-content">
                        <div style="position: relative;margin-top:5px;margin-bottom:10px; width:100px;">
                            <img id="anhAvatar" src="~/Areas/AdminLinja/Content/images/NoImage.jpg" class="img-thumbnail img-responsive">
                            <div style="position: absolute; bottom: 0; right: 0; margin: 0 5px 2px 0">
                                <button id="xoaAnh" type="button" class="glyphicon glyphicon-remove"></button>
                                <button id="themAnh" type="button" class="glyphicon glyphicon-file"></button>
                                <input id="tepAnh" type="file" style="display:none;" />
                            </div>
                        </div>
                    </div><!--end img-->
                   <div class="form-save">
                       <button type="button" id="saveButton" class="k-button k-button-icontext"><span class="k-icon k-i-plus"></span> Thêm mới</button>
                       <button type="button" id="editButton" class="k-button k-button-icontext"><span class="k-icon k-edit"></span> Sửa</button>
                   </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Ảnh dành cho slide</div>
                <div class="panel-body">
                    @(Html.Kendo().Grid<SanPhamModel>()
                        .Name("gridanhslide")
                        .Columns(columns =>
                        {
                            columns.Bound(c => c.ArticleId).Title("Ảnh")
                            .ClientTemplate(
                                @"<div class='customer-photo'
                                    style='background-image: url(" + @Url.Content("~/Areas/AdminLinja/Content/images/NoImage.jpg") + ");'></div><div class='customer-name'>#: Name #</div>")
                            .Width(240);
                            columns.Bound(c => c.Name);
                            columns.Bound(c => c.Id).Sortable(false).Title("").ClientTemplate("<a onclick='showWindowEditDanhMuc(\"#=Id#\")' ><span class='glyphicon glyphicon-pencil'></span></a>").HtmlAttributes(new { style = "text-align:center;width:30px;" });
                            columns.Bound(c => c.Id).Sortable(false).Title("").ClientTemplate("<a onclick='removeItemGridLHDL(\"#=Id#\")' ><span class='glyphicon glyphicon-trash'></span></a>").HtmlAttributes(new { style = "text-align:center;width:30px;" });
                        })
                        .ToolBar(toolbar =>
                        {
                            toolbar.Template(
                            @<text>
                                <div class="toolbar">
                                    <table style="width:100%">
                                        <tr>
                                            <td width="25%" align="left">
                                                <a href="@Url.Action("Create","SanPham",new{Area="AdminLinja"})" target="_blank" id="btnSanPham" class="k-button"><span class="k-icon k-i-plus"></span>Thêm Ảnh</a>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </text>);
                        })                        
                        .Pageable()
                        .Sortable()
                        .Selectable(select => select
                        .Mode(GridSelectionMode.Single)
                        .Type(GridSelectionType.Row))
                        .DataSource(dataSource => dataSource
                        .Ajax()
                        .PageSize(10)
                        .Read(read => read.Action("LoadDataSanPham", "Common")))/*.Data("filterSanPhamParams")*/
                    )
                    <hr />
                </div>
            </div>
        </div>
    </div>
</div>

<!--Danh sách sản phẩm-->
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="well">
                <div class="panel panel-default">
                    <div class="panel-heading text-center"><h2 class="text-title">Danh sách sản phẩm</h2></div>
                    <div class="panel-body" id="clientsDb">
                        @(Html.Kendo().Grid<SanPhamModel>()
          .Name("grdSanPham")
          .Columns(columns =>
          {
              columns.Bound(c => c.ArticleId).Sortable(false).Title("Id");
              columns.Bound(c => c.UrlAnh).Title("Ảnh đại diện").Width(50).ClientTemplate("<img src='" + @Url.Content("#=UrlAnh#") + "' height='30px' width='30px'/>");
              columns.Bound(c => c.Ten).Sortable(false).Title("Danh mục");
              columns.Bound(c => c.Name).Sortable(false).Title("Tên sản phẩm");
              columns.Bound(c => c.NgayBatDau).Sortable(false).Title("Ngày bắt đầu");
              columns.Bound(c => c.NgayKetThuc).Sortable(false).Title("Ngày kết thúc");
              columns.Bound(c => c.TrangThai).Sortable(false).Title("Trạng thái");
              columns.Bound(c => c.Gia).Sortable(false).Title("Giá mới").ClientTemplate("<div class=\"toCurrency\">#=Gia#</div>");
              columns.Bound(c => c.Activeted).Sortable(false).Title("Kích hoạt").ClientTemplate("<div style=\"text-align:center;\">#=Activeted#</div>").Width(30);
              columns.Bound(c => c.NgayTao).Sortable(false).Title("Ngày Tạo");
              columns.Bound(c => c.Id).Sortable(false).Title("").ClientTemplate("<a onclick='showWindowEditDanhMuc(\"#=Id#\")' ><span class='glyphicon glyphicon-pencil'></span></a>").HtmlAttributes(new { style = "text-align:center;width:30px;" });
              columns.Bound(c => c.Id).Sortable(false).Title("").ClientTemplate("<a onclick='removeItemGridLHDL(\"#=Id#\")' ><span class='glyphicon glyphicon-trash'></span></a>").HtmlAttributes(new { style = "text-align:center;width:30px;" });
          })
          .ToolBar(toolbar =>
          {
          toolbar.Template(
            @<text>
                <div class="toolbar">
                    <table style="width:100%">
                        <tr>
                            <td width="25%" align="left">
                                <a href="@Url.Action("Create","SanPham",new{Area="AdminLinja"})" target="_blank" id="btnSanPham" class="k-button"><span class="k-icon k-i-plus"></span>Thêm Sản Phẩm</a>
                            </td>
                        </tr>
                    </table>
                </div>
            </text>);
          })
        .Pageable()
        .Sortable()
        .Selectable(select => select
        .Mode(GridSelectionMode.Single)
        .Type(GridSelectionType.Row))
        .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(10)
        .Read(read => read.Action("LoadDataSanPham", "Common")))/*.Data("filterSanPhamParams")*/
                        )
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<!--js-->
<script>
    //





    //phần này dành cho Image
    var urlHost = "@Url.Content("~/Content/uploads/articles/")";
    $("#txtContent").kendoEditor(
                {
                    imageBrowser: {
                        transport: {
                            read: "@Url.Action("Read", "ImageBrowser")",
                        destroy: {
                            url: "@Url.Action("Destroy", "ImageBrowser")",
                        type: "POST"
                    },
                    create: {
                        url: "@Url.Action("Create", "ImageBrowser")",
                    type: "POST"
                },
    thumbnailUrl: "@Url.Action("Thumbnail", "ImageBrowser")",
    uploadUrl: "@Url.Action("Upload", "ImageBrowser")",
    imageUrl: function (options) {
        return urlHost + options;
    }

    }

    },
    tools: [
        "bold",
        "italic",
        "underline",
        "strikethrough",
        "justifyLeft",
        "justifyCenter",
        "justifyRight",
        "justifyFull",
        "insertUnorderedList",
        "insertOrderedList",
        "indent",
        "outdent",
        "createLink",
        "unlink",
        "insertImage",
        "insertFile",
        "subscript",
        "superscript",
        "createTable",
        "addRowAbove",
        "addRowBelow",
        "addColumnLeft",
        "addColumnRight",
        "deleteRow",
        "deleteColumn",
        "viewHtml",
        "formatting",
        "cleanFormatting",
        "fontName",
        "fontSize",
        "foreColor",
        "backColor"
    ]
    }
        );
</script>



